define(["require","exports","tslib","prop-types","react","modules/clean/auth/login_or_register/types","modules/clean/react/file_viewer/file_viewer","modules/clean/open_in_app/actions","modules/clean/sharing/async_share_modal_util","modules/clean/viewer","modules/constants/file_viewer","modules/clean/react/file_viewer/data/store","modules/clean/web_timing_logger","modules/clean/react/extensions/data/store","modules/clean/integrations/zoom_share_dialog/async_modal"],(function(e,t,i,o,r,n,a,s,l,d,u,c,p,_,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importDefault(o);var h=(function(t){function h(e){var i=t.call(this,e)||this,o=d.Viewer.get_viewer(),r=e.userId?o.get_user_by_id(e.userId):o.work_user||o.personal_user;i.state={user:r},p.log_js_modules_application_code_start();var n=e.file,a=c.getStoreForFileViewer();return c.hydrateFileViewerNamespace(a,{file:n},r),r&&_.initializeStore(r,[n]),i}return i.__extends(h,t),h.prototype.componentDidMount=function(){var t=this,o=this.props,a=o.shareEmail,d=o.file;if(a&&this.state.user)new Promise((function(t,i){e(["modules/clean/react/browse/models"],t,i)})).then(i.__importStar).then((function(e){var i=e.File;l.asyncShowPrefilledShareModal({user:t.state.user,sharePrefillEmails:[a],content:new i(t.props.file)})}));else if(this.props.authModalKind!==n.LoginOrRegisterKind.IMMEDIATE||this.state.user)this.props.presentInZoom&&this.state.user&&m.asyncShowModal(this.state.user.id,d.file_id,"file-viewer-modal-overlay","desktop");else{i.__awaiter(t,void 0,void 0,(function(){var t,o,a;return i.__generator(this,(function(s){switch(s.label){case 0:return[4,Promise.all([new Promise((function(t,i){e(["modules/clean/react/modal"],t,i)})).then(i.__importStar),new Promise((function(t,i){e(["modules/clean/auth/login_or_register/modal"],t,i)})).then(i.__importStar)])];case 1:return t=s.sent(),o=t[0].Modal,a=t[1].LoginOrRegisterModal,o.showInstance(r.default.createElement(a,{downloadAction:null,id:"shared-link-immediate-signup-modal",initialMode:n.Mode.REGISTER,kind:n.LoginOrRegisterKind.IMMEDIATE,onAuthenticateSuccess:function(){},onCancel:function(){},signup_tag:"shmodel_modal_register",showAppleLogin:u.SHOW_APPLE_LOGIN})),[2]}}))}))}if(this.props.openImmediatelyInApp){var c=this.props.file;s.openImmediately(c.open_in_app_data)}},h.prototype.render=function(){var e=this.props,t=e.fileViewerProps,o=e.onCloseUrl,n=e.isEmbedded,s=e.sharedLinkInfo,l=e.shareToken,d=e.sharePermission,u=e.LoggedOutUXGoogleVariant,c=e.LoggedOutUXPaperVariant,p=r.default.createElement(a.FileViewer,i.__assign({},t,{fileCount:1,fileIndex:0,titleBarCloseUrl:o,sharedLinkInfo:s,shareToken:l,sharePermission:d,user:this.state.user,transparentBackground:!1,LoggedOutUXGoogleVariant:u,LoggedOutUXPaperVariant:c}));return n?r.default.createElement("div",{className:"embedded"},p):p},h.prototype.getChildContext=function(){return{authModalKind:this.props.authModalKind}},h.childContextTypes={authModalKind:o.default.oneOf(["download","immediate",null])},h})((r=i.__importDefault(r)).default.Component);t.FileViewerContainer=h}));
//# sourceMappingURL=container.min.js-vflZKr1ap.map